* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  /* Leather sidebar colors */
  --leather-base: #2a1a12;
  --leather-highlight: #3d2518;
  --leather-shadow: #1a0f0a;
  --leather-stitch: #8b6914;
  --leather-emboss: #221510;

  /* Mahogany wood colors */
  --mahogany-base: #4a1c1c;
  --mahogany-dark: #2d1010;
  --mahogany-light: #6b2a2a;
  --mahogany-grain: #3a1515;

  /* Brass metal colors */
  --brass-light: #d4a84b;
  --brass-base: #b8860b;
  --brass-dark: #8b6914;
  --brass-shadow: #5c4a0f;
  --brass-highlight: #f0d88a;

  /* Text colors */
  --text-light: #f4e8d3;
  --text-gold: #d4a84b;
  --text-muted: #9a8b7a;

  /* Typography */
  --font-display: 'Playfair Display', Georgia, serif;
  --font-body: 'Cormorant Garamond', 'Crimson Text', Georgia, serif;
}

body {
  font-family: var(--font-body);
  background: var(--mahogany-dark);
  color: var(--text-light);
  min-height: 100vh;
  font-size: 16px;
}

.app {
  display: flex;
  min-height: 100vh;
}

/* ========================================
   SIDEBAR - Leather with Embossed Effect
   ======================================== */
.sidebar {
  width: 260px;
  padding: 20px 0;
  display: flex;
  flex-direction: column;
  position: relative;
  overflow: hidden;

  /* Rich leather texture with embossing */
  background:
    /* Embossed panel effect */
    linear-gradient(
      135deg,
      rgba(0,0,0,0.1) 0%,
      transparent 50%,
      rgba(255,255,255,0.02) 100%
    ),
    /* Leather grain - fine texture */
    url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E"),
    /* Vertical leather grain */
    repeating-linear-gradient(
      90deg,
      transparent 0,
      rgba(0,0,0,0.03) 1px,
      transparent 2px,
      transparent 5px
    ),
    /* Base leather gradient */
    linear-gradient(
      180deg,
      var(--leather-highlight) 0%,
      var(--leather-base) 10%,
      var(--leather-base) 90%,
      var(--leather-shadow) 100%
    );
  background-color: var(--leather-base);

  /* Leather edge with brass trim */
  border-right: 5px solid;
  border-image: linear-gradient(
    180deg,
    var(--brass-highlight) 0%,
    var(--brass-base) 20%,
    var(--brass-dark) 80%,
    var(--brass-shadow) 100%
  ) 1;

  box-shadow:
    inset -12px 0 20px rgba(0,0,0,0.4),
    inset 3px 0 8px rgba(255,255,255,0.03),
    /* Embossed inner border */
    inset 8px 8px 15px rgba(0,0,0,0.2),
    inset -2px -2px 8px rgba(255,255,255,0.02);
}

/* Decorative stitching - along the edge */
.sidebar::before {
  content: '';
  position: absolute;
  right: 8px;
  top: 15px;
  bottom: 15px;
  width: 3px;
  background:
    repeating-linear-gradient(
      180deg,
      var(--leather-stitch) 0,
      var(--leather-stitch) 5px,
      transparent 5px,
      transparent 9px
    );
  opacity: 0.3;
  border-radius: 2px;
}

/* Art nouveau corner accent */
.sidebar::after {
  content: '';
  position: absolute;
  bottom: 10px;
  left: 10px;
  width: 60px;
  height: 60px;
  background: url('/corner-flourish.svg') no-repeat;
  background-size: contain;
  opacity: 0.4;
  transform: rotate(180deg);
}

/* Brand section with logo */
.sidebar-brand {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 15px 10px 20px;
  margin: 0 10px 15px;
}

.sidebar-logo {
  width: 100%;
  max-width: 220px;
  height: auto;
  filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
}

.shelf-list {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 0 15px;
}

.shelf-item {
  display: flex;
  align-items: center;
  padding: 12px 14px;
  border-radius: 6px;
  cursor: pointer;
  background: transparent;
  border: 1px solid transparent;
  color: var(--text-light);
  font-family: var(--font-body);
  font-size: 1.05rem;
  text-align: left;
  width: 100%;
  transition: all 0.25s ease;
}

.shelf-item:hover {
  background: rgba(255,255,255,0.06);
  border-color: rgba(139, 105, 20, 0.15);
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.2);
}

.shelf-item.active {
  background:
    linear-gradient(135deg, rgba(212, 168, 75, 0.12) 0%, rgba(212, 168, 75, 0.08) 100%);
  border-color: rgba(212, 168, 75, 0.3);
  border-left: 3px solid var(--brass-base);
  box-shadow:
    inset 2px 2px 4px rgba(0,0,0,0.2),
    0 0 10px rgba(212, 168, 75, 0.1);
}

.shelf-button {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
  background: none;
  border: none;
  color: inherit;
  font: inherit;
  cursor: pointer;
  text-align: left;
}

.shelf-icon {
  font-size: 1.3rem;
  color: var(--brass-light);
  text-shadow: 0 0 8px rgba(212, 168, 75, 0.3);
}

.shelf-actions {
  display: none;
  gap: 4px;
}

.shelf-item:hover .shelf-actions {
  display: flex;
}

.shelf-action-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 0.85rem;
  opacity: 0.7;
  transition: all 0.2s;
}

.shelf-action-btn:hover {
  background: rgba(255,255,255,0.1);
  opacity: 1;
}

.shelf-edit-input {
  flex: 1;
  background: rgba(0,0,0,0.4);
  border: 1px solid var(--brass-dark);
  color: var(--text-light);
  padding: 6px 10px;
  border-radius: 4px;
  font: inherit;
  box-shadow: inset 1px 1px 3px rgba(0,0,0,0.3);
}

/* Lyre divider */
.shelf-divider {
  height: 30px;
  margin: 15px 0;
  background: url('/lyre-divider.svg') center center no-repeat;
  background-size: contain;
  opacity: 0.5;
}

.shelf-heading {
  font-family: var(--font-display);
  font-size: 0.7rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 3px;
  color: var(--brass-light);
  padding: 0 14px;
  margin-bottom: 10px;
  opacity: 0.8;
}

.add-shelf-btn {
  margin-top: auto;
  padding: 14px;
  background:
    linear-gradient(135deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.1) 100%);
  border: 1px dashed rgba(212, 168, 75, 0.35);
  color: var(--text-muted);
  border-radius: 6px;
  cursor: pointer;
  font: inherit;
  font-size: 0.95rem;
  transition: all 0.25s ease;
}

.add-shelf-btn:hover {
  background: rgba(212, 168, 75, 0.1);
  color: var(--text-gold);
  border-color: var(--brass-base);
  border-style: solid;
  box-shadow: 0 0 15px rgba(212, 168, 75, 0.15);
}

/* ========================================
   MAIN CONTENT - Mahogany with Decorations
   ======================================== */
.main-content {
  flex: 1;
  overflow-y: auto;
  padding: 40px;
  position: relative;

  /* Mahogany wood texture with music notation */
  background:
    /* Treble clef watermark */
    url('/treble-clef.svg') 85% 20% no-repeat,
    url('/treble-clef.svg') 10% 70% no-repeat,
    /* Staff lines pattern */
    repeating-linear-gradient(
      0deg,
      transparent 0,
      transparent 30px,
      rgba(74, 28, 28, 0.15) 30px,
      rgba(74, 28, 28, 0.15) 31px,
      transparent 31px,
      transparent 38px,
      rgba(74, 28, 28, 0.15) 38px,
      rgba(74, 28, 28, 0.15) 39px,
      transparent 39px,
      transparent 46px,
      rgba(74, 28, 28, 0.15) 46px,
      rgba(74, 28, 28, 0.15) 47px,
      transparent 47px,
      transparent 54px,
      rgba(74, 28, 28, 0.15) 54px,
      rgba(74, 28, 28, 0.15) 55px,
      transparent 55px,
      transparent 62px,
      rgba(74, 28, 28, 0.15) 62px,
      rgba(74, 28, 28, 0.15) 63px,
      transparent 63px,
      transparent 200px
    ),
    /* Wood grain - horizontal */
    repeating-linear-gradient(
      92deg,
      transparent 0,
      transparent 2px,
      rgba(0,0,0,0.08) 2px,
      rgba(0,0,0,0.08) 3px,
      transparent 3px,
      transparent 40px
    ),
    /* Wood grain - angled */
    repeating-linear-gradient(
      87deg,
      transparent 0,
      transparent 1px,
      rgba(60,20,20,0.25) 1px,
      rgba(60,20,20,0.25) 2px,
      transparent 2px,
      transparent 60px
    ),
    /* Knots and swirls */
    radial-gradient(ellipse 150px 100px at 15% 25%, rgba(90,35,35,0.25) 0%, transparent 50%),
    radial-gradient(ellipse 120px 80px at 80% 55%, rgba(90,35,35,0.2) 0%, transparent 50%),
    radial-gradient(ellipse 180px 100px at 45% 85%, rgba(90,35,35,0.18) 0%, transparent 50%),
    /* Base gradient */
    linear-gradient(
      180deg,
      var(--mahogany-light) 0%,
      var(--mahogany-base) 15%,
      var(--mahogany-base) 85%,
      var(--mahogany-dark) 100%
    );
  background-color: var(--mahogany-base);
  background-size: 200px 400px, 200px 400px, auto, auto, auto, auto, auto, auto, auto;
}

/* Corner flourishes */
.main-content::before {
  content: '';
  position: fixed;
  top: 20px;
  right: 20px;
  width: 80px;
  height: 80px;
  background: url('/corner-flourish.svg') no-repeat;
  background-size: contain;
  opacity: 0.35;
  transform: rotate(-90deg);
  pointer-events: none;
}

.main-content::after {
  content: '';
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 80px;
  height: 80px;
  background: url('/corner-flourish.svg') no-repeat;
  background-size: contain;
  opacity: 0.35;
  pointer-events: none;
}

.bookshelf {
  max-width: 1200px;
  margin: 0 auto;
  position: relative;
}

.shelf-row {
  margin-bottom: 50px;
  position: relative;
}

/* Art nouveau curved border above shelf */
.shelf-row::before {
  content: '';
  position: absolute;
  top: -10px;
  left: 20px;
  right: 20px;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--brass-dark) 20%,
    var(--brass-light) 50%,
    var(--brass-dark) 80%,
    transparent 100%
  );
  opacity: 0.3;
  border-radius: 50%;
}

.books-container {
  display: flex;
  flex-wrap: wrap;
  gap: 30px;
  padding: 25px 35px;
  min-height: 200px;
  align-items: flex-end;
}

/* Brass shelf with detailed metalwork */
.shelf-wood {
  height: 28px;
  position: relative;
  border-radius: 3px;

  /* Polished brass gradient */
  background:
    /* Brushed texture */
    repeating-linear-gradient(
      90deg,
      transparent 0,
      rgba(255,255,255,0.03) 1px,
      transparent 2px,
      transparent 4px
    ),
    linear-gradient(
      180deg,
      var(--brass-highlight) 0%,
      var(--brass-light) 8%,
      var(--brass-base) 25%,
      var(--brass-dark) 75%,
      var(--brass-shadow) 92%,
      var(--brass-dark) 100%
    );

  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.5),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 6px 15px rgba(0,0,0,0.5),
    0 3px 6px rgba(0,0,0,0.3);
}

/* Decorative brass edge patterns */
.shelf-wood::before {
  content: '';
  position: absolute;
  top: 3px;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255,255,255,0.6) 10%,
    rgba(255,255,255,0.3) 50%,
    rgba(255,255,255,0.6) 90%,
    transparent 100%
  );
}

.shelf-wood::after {
  content: '';
  position: absolute;
  bottom: 5px;
  left: 15px;
  right: 15px;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(0,0,0,0.4) 20%,
    rgba(0,0,0,0.2) 50%,
    rgba(0,0,0,0.4) 80%,
    transparent 100%
  );
}

.empty-shelf {
  text-align: center;
  padding: 50px;
  color: var(--text-muted);
  width: 100%;
  font-style: italic;
}

.empty-hint {
  font-size: 0.9rem;
  margin-top: 12px;
  opacity: 0.7;
}

/* ========================================
   LIST VIEW - Detail View for Searching
   ======================================== */
.bookshelf-list-view {
  max-width: 900px;
}

.list-container {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 15px;
  background: rgba(0,0,0,0.15);
  border-radius: 8px;
  border: 1px solid rgba(212, 168, 75, 0.15);
}

.list-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 18px;
  background: rgba(255,255,255,0.03);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.list-item:hover {
  background: rgba(212, 168, 75, 0.1);
  border-color: rgba(212, 168, 75, 0.2);
  padding-left: 22px;
}

.list-item-regalpaket {
  border-left: 3px solid rgba(74, 124, 89, 0.4);
}

.list-item-regalpaket:hover {
  border-left-color: #4a7c59;
}

.list-item-icon {
  font-size: 1.5rem;
  opacity: 0.7;
  flex-shrink: 0;
}

.list-item-title {
  flex: 1;
  font-family: var(--font-display);
  font-size: 1rem;
  color: var(--text-light);
  /* Allow full name to show - no truncation */
  word-break: break-word;
}

.list-item-badges {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.list-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 4px;
  font-size: 0.85rem;
  font-weight: bold;
}

.list-badge-favorite {
  background: linear-gradient(135deg, #ffd700 0%, #daa520 50%, #b8860b 100%);
  color: #5c4a0f;
  border: 1px solid #8b6914;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

.list-badge-regal {
  background: linear-gradient(135deg, #4a7c59 0%, #2d5a3a 50%, #1e4028 100%);
  color: #c8e6c9;
  border: 1px solid #1a3020;
  font-family: var(--font-display);
}

.list-badge-annotation {
  background: linear-gradient(135deg, var(--brass-highlight) 0%, var(--brass-base) 50%, var(--brass-dark) 100%);
  color: #1a0f0a;
  border: 1px solid var(--brass-shadow);
}

/* View toggle buttons */
.view-toggle {
  display: flex;
  background: rgba(0,0,0,0.2);
  border-radius: 6px;
  padding: 2px;
  border: 1px solid rgba(212, 168, 75, 0.15);
}

.view-toggle-btn {
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  font-size: 1.1rem;
  cursor: pointer;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.view-toggle-btn:hover {
  color: var(--text-light);
  background: rgba(255,255,255,0.05);
}

.view-toggle-btn.active {
  background: rgba(212, 168, 75, 0.2);
  color: var(--text-gold);
}

/* Favorites sidebar item styling */
.shelf-item-favorites.active {
  background:
    linear-gradient(135deg, rgba(255, 215, 0, 0.12) 0%, rgba(218, 165, 32, 0.08) 100%);
  border-color: rgba(255, 215, 0, 0.3);
  border-left: 3px solid #daa520;
}

/* ========================================
   BOOKS - Varied Spine Colors
   ======================================== */
.book {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  transition: transform 0.3s ease, filter 0.3s ease;
}

.book:hover {
  transform: translateY(-12px) scale(1.02);
  filter: brightness(1.05);
}

/* Book cover with vintage leather look */
.book-cover {
  width: 95px;
  height: 130px;
  border-radius: 0 5px 5px 0;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-shadow:
    -4px 0 0 var(--book-spine-color, #4a3728),
    -6px 0 0 var(--book-spine-dark, #3a2a1e),
    3px 5px 12px rgba(0,0,0,0.5);

  /* Default book cover gradient */
  background:
    /* Leather texture */
    repeating-linear-gradient(
      135deg,
      transparent 0,
      rgba(0,0,0,0.02) 1px,
      transparent 2px,
      transparent 4px
    ),
    linear-gradient(135deg, #c9a86c 0%, #a07d4a 40%, #8b6b3d 100%);
}

/* Varied book colors - applied via nth-child */
.book:nth-child(5n+1) .book-cover {
  background: linear-gradient(135deg, #8b4513 0%, #6b3410 40%, #5a2d0e 100%);
  --book-spine-color: #4a2508;
  --book-spine-dark: #3a1a05;
}

.book:nth-child(5n+2) .book-cover {
  background: linear-gradient(135deg, #2d4a3a 0%, #1e3a2a 40%, #152a1e 100%);
  --book-spine-color: #0f2015;
  --book-spine-dark: #0a150f;
}

.book:nth-child(5n+3) .book-cover {
  background: linear-gradient(135deg, #4a3a5a 0%, #3a2a4a 40%, #2a1a3a 100%);
  --book-spine-color: #1f1530;
  --book-spine-dark: #150f25;
}

.book:nth-child(5n+4) .book-cover {
  background: linear-gradient(135deg, #8b0000 0%, #6b0000 40%, #4a0000 100%);
  --book-spine-color: #350000;
  --book-spine-dark: #250000;
}

.book:nth-child(5n+5) .book-cover {
  background: linear-gradient(135deg, #c9a86c 0%, #a07d4a 40%, #8b6b3d 100%);
  --book-spine-color: #4a3728;
  --book-spine-dark: #3a2a1e;
}

.book-spine {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 10px;
  background: linear-gradient(
    90deg,
    var(--book-spine-dark, #3a2a1e) 0%,
    var(--book-spine-color, #4a3728) 50%,
    color-mix(in srgb, var(--book-spine-color, #4a3728) 80%, white) 100%
  );
  border-radius: 3px 0 0 3px;
}

/* Gold embossed decorative lines on book */
.book-cover::before {
  content: '';
  position: absolute;
  top: 15px;
  left: 15px;
  right: 10px;
  height: 2px;
  background: linear-gradient(90deg, var(--brass-light), var(--brass-dark));
  opacity: 0.4;
  border-radius: 1px;
}

.book-cover::after {
  content: '';
  position: absolute;
  bottom: 15px;
  left: 15px;
  right: 10px;
  height: 2px;
  background: linear-gradient(90deg, var(--brass-light), var(--brass-dark));
  opacity: 0.4;
  border-radius: 1px;
}

.book-icon {
  font-size: 2.2rem;
  color: var(--brass-light);
  text-shadow: 1px 1px 2px rgba(0,0,0,0.4);
  opacity: 0.8;
}

.book-title {
  margin-top: 12px;
  font-family: var(--font-display);
  font-size: 0.85rem;
  font-weight: 500;
  text-align: center;
  max-width: 110px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-light);
  text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
}

/* ========================================
   CONTEXT MENU - Victorian Style
   ======================================== */
.context-menu {
  position: fixed;
  background:
    linear-gradient(135deg, rgba(0,0,0,0.1) 0%, transparent 50%),
    var(--leather-base);
  border: 2px solid var(--brass-dark);
  border-radius: 8px;
  padding: 10px 0;
  min-width: 200px;
  box-shadow:
    0 8px 30px rgba(0,0,0,0.6),
    inset 0 1px 0 rgba(255,255,255,0.05);
  z-index: 1000;
}

.context-menu-header {
  padding: 8px 18px 12px;
  font-family: var(--font-display);
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--brass-light);
  border-bottom: 1px solid rgba(212, 168, 75, 0.2);
  margin-bottom: 8px;
}

.context-menu-item {
  display: block;
  width: 100%;
  padding: 12px 18px;
  background: none;
  border: none;
  color: var(--text-light);
  font: inherit;
  font-size: 0.95rem;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s;
}

.context-menu-item:hover {
  background: rgba(212, 168, 75, 0.12);
  padding-left: 22px;
}

.context-menu-remove {
  color: #cc6b5a;
}

.context-menu-divider {
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(212, 168, 75, 0.25), transparent);
  margin: 10px 0;
}

/* ========================================
   RENAME MODAL - Victorian Style
   ======================================== */
.rename-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.rename-modal {
  background:
    linear-gradient(135deg, rgba(0,0,0,0.1) 0%, transparent 50%),
    var(--leather-base);
  border: 3px solid var(--brass-dark);
  border-radius: 12px;
  padding: 24px 28px;
  min-width: 320px;
  max-width: 90vw;
  box-shadow:
    0 4px 20px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,255,255,0.05);
}

.rename-modal h3 {
  font-family: var(--font-display);
  font-size: 1.2rem;
  color: var(--text-gold);
  margin-bottom: 16px;
  text-align: center;
}

.rename-input {
  width: 100%;
  padding: 12px 16px;
  border: 2px solid var(--brass-dark);
  border-radius: 8px;
  font-family: var(--font-body);
  font-size: 1rem;
  background:
    linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.1) 100%),
    var(--mahogany-light);
  color: var(--text-light);
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
  margin-bottom: 12px;
}

.rename-input:focus {
  outline: none;
  border-color: var(--brass-base);
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.3),
    0 0 0 3px rgba(212, 168, 75, 0.2);
}

.rename-error {
  color: #cc6b5a;
  font-size: 0.9rem;
  margin-bottom: 12px;
  text-align: center;
}

.rename-buttons {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.rename-cancel,
.rename-submit {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  font-family: var(--font-display);
  font-size: 0.95rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.rename-cancel {
  background: rgba(255,255,255,0.1);
  color: var(--text-muted);
}

.rename-cancel:hover {
  background: rgba(255,255,255,0.15);
  color: var(--text-light);
}

.rename-submit {
  background:
    linear-gradient(180deg, var(--brass-light) 0%, var(--brass-base) 50%, var(--brass-dark) 100%);
  color: #1a0f0a;
  text-shadow: 0 1px 0 rgba(255,255,255,0.3);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.4),
    0 2px 8px rgba(0,0,0,0.3);
}

.rename-submit:hover {
  background:
    linear-gradient(180deg, var(--brass-highlight) 0%, var(--brass-light) 50%, var(--brass-base) 100%);
  transform: translateY(-1px);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.5),
    0 4px 12px rgba(0,0,0,0.4);
}

/* ========================================
   PDF VIEWER - With Page Turn & Aged Paper
   ======================================== */
.pdf-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.92);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  animation: fadeIn 0.25s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.pdf-container {
  width: 95%;
  height: 95%;
  max-width: 1200px;
  background: #1a1a1a;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow:
    0 30px 100px rgba(0,0,0,0.7),
    0 0 0 1px rgba(212, 168, 75, 0.1);
  animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.97);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.pdf-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 24px;
  background:
    linear-gradient(180deg, #2d2520 0%, #1f1a18 100%);
  border-bottom: 1px solid rgba(212, 168, 75, 0.15);
  flex-shrink: 0;
}

.pdf-title {
  font-family: var(--font-display);
  font-size: 1.15rem;
  font-weight: 500;
  color: var(--text-gold);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-right: 20px;
  letter-spacing: 0.5px;
}

.pdf-controls {
  display: flex;
  align-items: center;
  gap: 10px;
  background: rgba(0,0,0,0.3);
  padding: 8px 14px;
  border-radius: 8px;
  border: 1px solid rgba(212, 168, 75, 0.1);
}

.pdf-control-btn {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.1);
  color: var(--text-light);
  width: 36px;
  height: 36px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 1.3rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.pdf-control-btn:hover:not(:disabled) {
  background: rgba(212, 168, 75, 0.2);
  border-color: var(--brass-dark);
  color: var(--text-gold);
}

.pdf-control-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.pdf-zoom-level {
  color: var(--text-muted);
  font-family: var(--font-display);
  font-size: 0.85rem;
  min-width: 55px;
  text-align: center;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 6px;
  padding: 6px 10px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.pdf-zoom-level:hover {
  background: rgba(255,255,255,0.08);
  color: var(--text-light);
}

.pdf-fit-active {
  color: var(--brass-light);
  border-color: rgba(212, 168, 75, 0.25);
  background: rgba(212, 168, 75, 0.1);
}

.pdf-page-info {
  color: var(--text-muted);
  font-family: var(--font-display);
  font-size: 0.85rem;
  min-width: 60px;
  text-align: center;
}

.pdf-divider {
  color: rgba(255,255,255,0.15);
  margin: 0 6px;
}

.pdf-close {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 2rem;
  cursor: pointer;
  line-height: 1;
  padding: 6px 10px;
  margin-left: 15px;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.pdf-close:hover {
  color: var(--text-light);
  background: rgba(255,255,255,0.1);
}

/* Aged paper effect container */
.pdf-scroll-container {
  flex: 1;
  overflow: auto;
  display: flex;
  justify-content: center;
  padding: 35px;

  /* Aged paper background */
  background:
    /* Subtle vignette */
    radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.3) 100%),
    /* Paper texture */
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paper'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.04' numOctaves='5' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paper)' opacity='0.03'/%3E%3C/svg%3E"),
    linear-gradient(180deg, #3d3530 0%, #2d2825 50%, #252220 100%);
}

.pdf-scroll-container .react-pdf__Document {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Page with aged paper effect */
.pdf-scroll-container .react-pdf__Page {
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.1),
    0 8px 30px rgba(0,0,0,0.5),
    /* Page edge effect */
    -2px 0 5px rgba(0,0,0,0.2);
  border-radius: 2px;
  position: relative;
}

/* Aged paper overlay effect */
.pdf-scroll-container .react-pdf__Page::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    /* Yellowed/aged tint */
    linear-gradient(135deg, rgba(245, 235, 220, 0.03) 0%, transparent 50%, rgba(210, 190, 160, 0.05) 100%),
    /* Edge darkening */
    radial-gradient(ellipse at center, transparent 60%, rgba(139, 105, 20, 0.05) 100%);
  border-radius: 2px;
  z-index: 1;
}

.pdf-scroll-container .react-pdf__Page canvas {
  display: block;
  border-radius: 2px;
}

.pdf-loading,
.pdf-error {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  color: var(--text-muted);
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-style: italic;
}

.pdf-error {
  color: #cc6b5a;
}

/* Fullscreen mode */
.pdf-fullscreen {
  width: 100% !important;
  height: 100% !important;
  max-width: none !important;
  border-radius: 0 !important;
}

.pdf-fullscreen .pdf-scroll-container {
  background: #1a1815;
  overflow: auto;
  overflow-x: hidden;
}

.pdf-container:fullscreen {
  width: 100vw;
  height: 100vh;
}

/* ========================================
   MAIN TOOLBAR - Search and Upload
   ======================================== */
.main-toolbar {
  display: flex;
  gap: 20px;
  margin-bottom: 25px;
  align-items: center;
}

.search-bar {
  flex: 1;
  max-width: 400px;
  position: relative;
}

.search-input {
  width: 100%;
  padding: 12px 40px 12px 16px;
  border: 2px solid var(--brass-dark);
  border-radius: 8px;
  font-family: var(--font-body);
  font-size: 1rem;
  background:
    linear-gradient(
      180deg,
      rgba(0,0,0,0.2) 0%,
      rgba(0,0,0,0.1) 100%
    ),
    var(--mahogany-light);
  color: var(--text-light);
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.3),
    0 1px 0 rgba(255,255,255,0.05);
  transition: all 0.2s ease;
}

.search-input::placeholder {
  color: var(--text-muted);
  font-style: italic;
}

.search-input:focus {
  outline: none;
  border-color: var(--brass-base);
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.3),
    0 0 0 3px rgba(212, 168, 75, 0.2),
    0 1px 0 rgba(255,255,255,0.05);
}

.search-clear {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 1.4rem;
  cursor: pointer;
  padding: 4px 8px;
  line-height: 1;
  transition: color 0.2s ease;
}

.search-clear:hover {
  color: var(--text-light);
}

.sort-select-wrapper {
  flex-shrink: 0;
}

.sort-select {
  padding: 12px 36px 12px 16px;
  border: 2px solid var(--brass-dark);
  border-radius: 8px;
  font-family: var(--font-body);
  font-size: 0.95rem;
  background:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%239a8b7a' d='M6 8L2 4h8z'/%3E%3C/svg%3E") calc(100% - 12px) center no-repeat,
    linear-gradient(
      180deg,
      rgba(0,0,0,0.2) 0%,
      rgba(0,0,0,0.1) 100%
    ),
    var(--mahogany-light);
  color: var(--text-light);
  cursor: pointer;
  appearance: none;
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.3),
    0 1px 0 rgba(255,255,255,0.05);
  transition: all 0.2s ease;
}

.sort-select:hover {
  border-color: var(--brass-base);
}

.sort-select:focus {
  outline: none;
  border-color: var(--brass-base);
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.3),
    0 0 0 3px rgba(212, 168, 75, 0.2),
    0 1px 0 rgba(255,255,255,0.05);
}

.sort-select option {
  background: var(--mahogany-base);
  color: var(--text-light);
  padding: 8px;
}

/* ========================================
   UPLOAD BUTTON - Ornate Brass Style
   ======================================== */
.upload-container {
  flex-shrink: 0;
}

.upload-btn {
  padding: 14px 28px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-family: var(--font-display);
  font-size: 1rem;
  font-weight: 500;
  letter-spacing: 1px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;

  /* Ornate brass button */
  background:
    /* Brushed texture */
    repeating-linear-gradient(
      90deg,
      transparent 0,
      rgba(255,255,255,0.02) 1px,
      transparent 2px,
      transparent 3px
    ),
    linear-gradient(
      180deg,
      var(--brass-highlight) 0%,
      var(--brass-light) 12%,
      var(--brass-base) 45%,
      var(--brass-dark) 88%,
      var(--brass-shadow) 100%
    );
  color: #1a0f0a;
  text-shadow: 0 1px 0 rgba(255,255,255,0.35);
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.45),
    inset 0 -2px 0 rgba(0,0,0,0.25),
    0 4px 12px rgba(0,0,0,0.35),
    0 0 0 1px var(--brass-dark);
}

.upload-btn:hover {
  background:
    repeating-linear-gradient(
      90deg,
      transparent 0,
      rgba(255,255,255,0.03) 1px,
      transparent 2px,
      transparent 3px
    ),
    linear-gradient(
      180deg,
      var(--brass-highlight) 0%,
      var(--brass-highlight) 15%,
      var(--brass-light) 50%,
      var(--brass-base) 88%,
      var(--brass-dark) 100%
    );
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.5),
    inset 0 -2px 0 rgba(0,0,0,0.2),
    0 6px 20px rgba(0,0,0,0.4),
    0 0 20px rgba(212, 168, 75, 0.2),
    0 0 0 1px var(--brass-base);
  transform: translateY(-1px);
}

.upload-btn:active {
  transform: translateY(1px);
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.2),
    0 2px 6px rgba(0,0,0,0.3),
    0 0 0 1px var(--brass-dark);
}

.upload-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Decorative corners on upload button */
.upload-btn::before,
.upload-btn::after {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  border: 2px solid rgba(0,0,0,0.2);
}

.upload-btn::before {
  top: 4px;
  left: 4px;
  border-right: none;
  border-bottom: none;
}

.upload-btn::after {
  bottom: 4px;
  right: 4px;
  border-left: none;
  border-top: none;
}

/* ========================================
   RESPONSIVE ADJUSTMENTS
   ======================================== */
@media (max-width: 768px) {
  .sidebar {
    width: 220px;
  }

  .main-content {
    padding: 20px;
  }

  .main-content::before,
  .main-content::after {
    width: 50px;
    height: 50px;
  }

  .books-container {
    gap: 20px;
    padding: 15px 20px;
  }

  .book-cover {
    width: 80px;
    height: 110px;
  }
}

/* ========================================
   SCROLLBAR STYLING
   ======================================== */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: var(--mahogany-dark);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(
    180deg,
    var(--brass-light) 0%,
    var(--brass-base) 50%,
    var(--brass-dark) 100%
  );
  border-radius: 6px;
  border: 2px solid var(--mahogany-dark);
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(
    180deg,
    var(--brass-highlight) 0%,
    var(--brass-light) 50%,
    var(--brass-base) 100%
  );
}

::-webkit-scrollbar-corner {
  background: var(--mahogany-dark);
}

/* ========================================
   ANNOTATION SYSTEM - Victorian Styling
   ======================================== */

/* Book annotation badge */
.book-annotation-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: linear-gradient(
    135deg,
    var(--brass-highlight) 0%,
    var(--brass-base) 50%,
    var(--brass-dark) 100%
  );
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 5;
  box-shadow:
    0 2px 4px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.3);
  border: 1px solid var(--brass-shadow);
}

.annotation-badge-icon {
  font-size: 0.7rem;
  filter: brightness(0.3);
}

/* Favorites badge on books */
.book-favorite-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: linear-gradient(
    135deg,
    #ffd700 0%,
    #daa520 50%,
    #b8860b 100%
  );
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 5;
  box-shadow:
    0 2px 4px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.4);
  border: 1px solid #8b6914;
}

.favorite-badge-icon {
  font-size: 0.75rem;
  color: #5c4a0f;
  text-shadow: 0 1px 0 rgba(255,255,255,0.3);
}

/* Floating Annotation Toolbar */
.annotation-toolbar-floating {
  position: fixed;
  z-index: 2500;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: linear-gradient(180deg, #2d2518 0%, #1f1a14 100%);
  border: 1px solid rgba(212, 168, 75, 0.3);
  border-radius: 10px;
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.5),
    0 2px 8px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  cursor: move;
  user-select: none;
  touch-action: none;
}

.annotation-toolbar-floating.dragging {
  opacity: 0.9;
  box-shadow:
    0 12px 48px rgba(0, 0, 0, 0.6),
    0 4px 12px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.annotation-toolbar-handle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 36px;
  color: rgba(212, 168, 75, 0.5);
  font-size: 14px;
  letter-spacing: -2px;
  cursor: grab;
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  margin-right: 4px;
  padding-right: 8px;
}

.annotation-toolbar-floating.dragging .annotation-toolbar-handle {
  cursor: grabbing;
}

/* Tool groups */
.annotation-tools {
  display: flex;
  align-items: center;
  gap: 6px;
}

@keyframes toolsSlideIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.annotation-tool-group {
  display: flex;
  align-items: center;
  gap: 4px;
  background: rgba(0,0,0,0.25);
  padding: 4px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.05);
}

.annotation-divider {
  width: 1px;
  height: 28px;
  background: rgba(255,255,255,0.1);
  margin: 0 4px;
}

/* Tool buttons */
.annotation-tool-btn {
  width: 36px;
  height: 36px;
  border: none;
  border-radius: 6px;
  background: transparent;
  cursor: pointer;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
  color: var(--text-light);
}

.annotation-tool-btn:hover {
  background: rgba(255,255,255,0.1);
}

.annotation-tool-btn.active {
  background: rgba(212, 168, 75, 0.2);
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
}

/* Color buttons */
.annotation-color-btn {
  width: 32px;
  height: 32px;
  border: 2px solid transparent;
  border-radius: 50%;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
  padding: 3px;
}

.annotation-color-btn:hover {
  transform: scale(1.1);
}

.annotation-color-btn.active {
  border-color: var(--brass-light);
  box-shadow: 0 0 8px rgba(212, 168, 75, 0.4);
}

.color-swatch {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: var(--swatch-color);
  border: 2px solid var(--swatch-border);
  box-shadow: inset 0 1px 2px rgba(255,255,255,0.3);
}

/* Width buttons */
.annotation-width-btn {
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 6px;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.annotation-width-btn:hover {
  background: rgba(255,255,255,0.1);
}

.annotation-width-btn.active {
  background: rgba(212, 168, 75, 0.2);
}

.width-indicator {
  width: 20px;
  background: var(--text-light);
  border-radius: 2px;
}

/* Stamp buttons */
.annotation-stamps {
  display: flex;
  flex-wrap: wrap;
  max-width: 160px;
  gap: 2px;
}

.annotation-stamp-btn {
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 6px;
  background: transparent;
  color: var(--text-light);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  transition: all 0.15s ease;
}

.annotation-stamp-btn:hover {
  background: rgba(255,255,255,0.1);
  transform: scale(1.1);
}

.annotation-stamp-btn.active {
  background: rgba(212, 168, 75, 0.2);
  box-shadow: 0 0 6px rgba(212, 168, 75, 0.3);
}

/* Action buttons */
.annotation-action-btn {
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 6px;
  background: rgba(255,255,255,0.08);
  color: var(--text-light);
  cursor: pointer;
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.annotation-action-btn:hover:not(:disabled) {
  background: rgba(255,255,255,0.15);
}

.annotation-action-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.annotation-clear-btn:hover:not(:disabled) {
  background: rgba(180, 80, 80, 0.3);
  color: #e88;
}

/* Canvas styling */
.annotation-canvas {
  border-radius: 2px;
}

.annotation-canvas-active {
  box-shadow: 0 0 0 2px rgba(212, 168, 75, 0.4);
}

/* PDF container when annotation mode is active */
.pdf-container.annotation-active .pdf-scroll-container {
  background:
    radial-gradient(ellipse at center, transparent 50%, rgba(212, 168, 75, 0.05) 100%),
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paper'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.04' numOctaves='5' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paper)' opacity='0.03'/%3E%3C/svg%3E"),
    linear-gradient(180deg, #3d3530 0%, #2d2825 50%, #252220 100%);
}

/* Hide text/annotation layers during annotation to prevent interference */
.pdf-container.annotation-active .react-pdf__Page__textContent,
.pdf-container.annotation-active .react-pdf__Page__annotations {
  pointer-events: none;
  opacity: 0;
}

/* Page wrapper for positioning annotation canvas */
.pdf-page-wrapper {
  position: relative;
  display: inline-block;
}

.pdf-page-wrapper .annotation-canvas {
  position: absolute;
  top: 0;
  left: 0;
  /* Prevent canvas from affecting scroll */
  will-change: contents;
}

/* Prevent scroll container from jumping when annotation mode changes */
.pdf-scroll-container {
  scroll-behavior: auto;
  overflow-anchor: none;
}

/* Active annotation control button */
.pdf-control-active {
  background: rgba(212, 168, 75, 0.2) !important;
  border-color: var(--brass-dark) !important;
  color: var(--text-gold) !important;
}

/* Mobile/Touch optimizations */
@media (max-width: 768px) {
  .annotation-toolbar-floating {
    padding: 6px 10px;
    gap: 6px;
  }

  .annotation-tool-group {
    padding: 2px;
  }

  .annotation-tool-btn,
  .annotation-color-btn,
  .annotation-width-btn,
  .annotation-action-btn {
    width: 40px;
    height: 40px;
    /* Larger touch targets on mobile */
  }

  .annotation-divider {
    display: none;
  }

  .annotation-tools {
    flex-wrap: wrap;
    gap: 4px;
  }

  .annotation-toolbar-handle {
    width: 16px;
    padding-right: 6px;
    margin-right: 2px;
  }
}

/* Tablet optimizations for stylus use */
@media (pointer: coarse) {
  .annotation-tool-btn,
  .annotation-color-btn,
  .annotation-width-btn,
  .annotation-action-btn {
    min-width: 44px;
    min-height: 44px;
  }
}

/* ========================================
   REGALPAKET - Special Badge & Styling
   ======================================== */

/* Regalpaket sidebar item */
.shelf-item-regal .regal-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 4px;
  background: linear-gradient(
    135deg,
    #4a7c59 0%,
    #2d5a3a 50%,
    #1e4028 100%
  );
  color: #c8e6c9;
  font-size: 0.85rem;
  font-weight: bold;
  font-family: var(--font-display);
  text-shadow: 0 1px 1px rgba(0,0,0,0.4);
  box-shadow:
    0 2px 4px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.2);
  border: 1px solid #1a3020;
}

.shelf-item-regal.active {
  background:
    linear-gradient(135deg, rgba(74, 124, 89, 0.15) 0%, rgba(45, 90, 58, 0.1) 100%);
  border-color: rgba(74, 124, 89, 0.35);
  border-left: 3px solid #4a7c59;
}

.shelf-item-regal:hover {
  background: rgba(74, 124, 89, 0.1);
  border-color: rgba(74, 124, 89, 0.2);
}

/* Regalpaket badge on books */
.book-regal-badge {
  position: absolute;
  bottom: 8px;
  right: 8px;
  width: 22px;
  height: 22px;
  border-radius: 4px;
  background: linear-gradient(
    135deg,
    #4a7c59 0%,
    #2d5a3a 50%,
    #1e4028 100%
  );
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 2px 4px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.2);
  border: 1px solid #1a3020;
  z-index: 5;
}

.regal-badge-icon {
  font-size: 0.75rem;
  font-weight: bold;
  font-family: var(--font-display);
  color: #c8e6c9;
  text-shadow: 0 1px 1px rgba(0,0,0,0.4);
}

/* Regalpaket book subtle styling */
.book-regalpaket .book-cover {
  box-shadow:
    -4px 0 0 var(--book-spine-color, #4a3728),
    -6px 0 0 var(--book-spine-dark, #3a2a1e),
    3px 5px 12px rgba(0,0,0,0.5),
    0 0 0 1px rgba(45, 90, 58, 0.3);
}

/* Regalpaket badge in viewer header */
.regal-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 4px;
  background: linear-gradient(
    135deg,
    #4a7c59 0%,
    #2d5a3a 50%,
    #1e4028 100%
  );
  color: #c8e6c9;
  font-size: 0.85rem;
  font-weight: bold;
  font-family: var(--font-display);
  margin-right: 10px;
  box-shadow:
    0 2px 4px rgba(0,0,0,0.3),
    inset 0 1px 0 rgba(255,255,255,0.2);
  border: 1px solid #1a3020;
  text-shadow: 0 1px 1px rgba(0,0,0,0.4);
}

/* Regalpaket page image styling */
.regal-page-image {
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.1),
    0 8px 30px rgba(0,0,0,0.5),
    -2px 0 5px rgba(0,0,0,0.2);
  border-radius: 2px;
  background: white;
}

/* Make Regalpaket conversion button */
.regal-convert-btn {
  width: auto !important;
  padding: 0 14px !important;
  font-size: 0.85rem !important;
  font-family: var(--font-display);
  letter-spacing: 0.5px;
  white-space: nowrap;
}

.regal-convert-btn:hover:not(:disabled) {
  background: rgba(45, 90, 58, 0.3) !important;
  border-color: #4a7c59 !important;
  color: #a8d5a9 !important;
}

.regal-convert-btn:disabled {
  opacity: 0.6;
}

/* Loading state during conversion */
.regal-convert-btn:disabled {
  animation: regalPulse 1.5s ease-in-out infinite;
}

@keyframes regalPulse {
  0%, 100% {
    opacity: 0.6;
  }
  50% {
    opacity: 0.9;
  }
}

/* ========================================
   REGALPAKET PREMIUM VIEWER EXPERIENCE
   ======================================== */

/* Premium scroll container background */
.regal-scroll-container {
  background:
    /* Subtle paper texture */
    url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paper'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.04' numOctaves='5' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paper)' opacity='0.02'/%3E%3C/svg%3E"),
    /* Rich vignette */
    radial-gradient(ellipse at center, rgba(35, 30, 28, 0.95) 0%, rgba(18, 15, 14, 1) 100%);
}

/* Book wrapper for 3D effect */
.regal-book-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  transform-style: preserve-3d;
}

/* Page container */
.regal-page-container {
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.1s ease-out;
}

/* Individual page layer */
.regal-page {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

.regal-page-underneath {
  position: relative;
  z-index: 1;
}

/* Enhanced page image styling */
.regal-page-image {
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.15),
    0 4px 8px rgba(0,0,0,0.2),
    0 12px 40px rgba(0,0,0,0.4),
    /* Inner glow for paper effect */
    inset 0 0 60px rgba(255, 252, 245, 0.03);
  border-radius: 2px 4px 4px 2px;
  background: #fffef8;
}

/* Page loading state */
.regal-page-loading {
  background:
    linear-gradient(135deg, #f5f0e6 0%, #e8e0d0 100%);
  border-radius: 2px 4px 4px 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #8a7a6a;
}

/* Book spine/edge effect */
.regal-page-edge {
  position: absolute;
  left: -8px;
  top: 0;
  width: 8px;
  background:
    /* Page layers effect */
    repeating-linear-gradient(
      180deg,
      #e8e0d0 0px,
      #f5f0e6 1px,
      #d8d0c0 2px
    ),
    linear-gradient(
      90deg,
      #c8baa8 0%,
      #e0d8c8 30%,
      #f0e8d8 70%,
      #d8d0c0 100%
    );
  border-radius: 2px 0 0 2px;
  box-shadow:
    -2px 0 4px rgba(0,0,0,0.3),
    inset 1px 0 2px rgba(255,255,255,0.3);
}

/* ========================================
   PAGE TURN ANIMATION - Next Page
   ======================================== */

.regal-page-flip {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  transform-origin: left center;
  z-index: 10;
  pointer-events: none;
}

.regal-flip-next {
  transform-origin: left center;
  animation: flipPageNext 0.5s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
}

@keyframes flipPageNext {
  0% {
    transform: rotateY(0deg);
  }
  30% {
    transform: rotateY(-30deg);
  }
  60% {
    transform: rotateY(-90deg);
  }
  100% {
    transform: rotateY(-180deg);
  }
}

/* ========================================
   PAGE TURN ANIMATION - Previous Page
   ======================================== */

.regal-flip-prev {
  transform-origin: left center;
  animation: flipPagePrev 0.5s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
}

@keyframes flipPagePrev {
  0% {
    transform: rotateY(-180deg);
  }
  40% {
    transform: rotateY(-90deg);
  }
  70% {
    transform: rotateY(-30deg);
  }
  100% {
    transform: rotateY(0deg);
  }
}

/* Page shadow during flip */
.regal-page-shadow {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    to right,
    rgba(0, 0, 0, 0.15) 0%,
    rgba(0, 0, 0, 0.05) 20%,
    transparent 40%
  );
  pointer-events: none;
  border-radius: 2px 4px 4px 2px;
}

.regal-flip-next .regal-page-shadow {
  animation: shadowFlipNext 0.5s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
}

@keyframes shadowFlipNext {
  0% {
    opacity: 0;
  }
  30% {
    opacity: 1;
  }
  70% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* Shadow for previous page flip */
.regal-page-shadow-prev {
  background: linear-gradient(
    to left,
    rgba(0, 0, 0, 0.15) 0%,
    rgba(0, 0, 0, 0.05) 20%,
    transparent 40%
  );
  animation: shadowFlipPrev 0.5s cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
}

@keyframes shadowFlipPrev {
  0% {
    opacity: 0;
  }
  30% {
    opacity: 1;
  }
  70% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

/* Glow effect behind the page during flip */
.regal-animating .regal-page-underneath::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    to left,
    rgba(0, 0, 0, 0.06) 0%,
    transparent 25%
  );
  pointer-events: none;
  border-radius: 2px 4px 4px 2px;
  animation: underlayGlow 0.5s ease-out forwards;
}

@keyframes underlayGlow {
  0%, 100% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
}

/* Subtle lift during page turn */
.regal-animating .regal-page-container {
  animation: pageLift 0.5s ease-out;
}

@keyframes pageLift {
  0%, 100% {
    transform: translateZ(0);
  }
  50% {
    transform: translateZ(5px);
  }
}

/* Premium header styling for Regalpaket */
.pdf-container:has(.regal-scroll-container) .pdf-header {
  background:
    linear-gradient(180deg, #2a2520 0%, #1a1815 100%);
  border-bottom: 1px solid rgba(74, 124, 89, 0.2);
}

.pdf-container:has(.regal-scroll-container) .pdf-controls {
  border-color: rgba(74, 124, 89, 0.15);
}

/* Disable pointer events during animation */
.regal-animating {
  pointer-events: none;
}

/* Page number indicator during turns */
.regal-page-container::before {
  content: '';
  position: absolute;
  bottom: -30px;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, transparent, rgba(74, 124, 89, 0.3), transparent);
  border-radius: 2px;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.regal-animating .regal-page-container::before {
  opacity: 1;
}

/* ========================================
   LOGIN PAGE - Victorian Style
   ======================================== */
.login-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background:
    /* Treble clef watermarks */
    url('/treble-clef.svg') 15% 20% no-repeat,
    url('/treble-clef.svg') 85% 75% no-repeat,
    /* Wood grain */
    repeating-linear-gradient(
      92deg,
      transparent 0,
      transparent 2px,
      rgba(0,0,0,0.08) 2px,
      rgba(0,0,0,0.08) 3px,
      transparent 3px,
      transparent 40px
    ),
    /* Base gradient */
    linear-gradient(
      180deg,
      var(--mahogany-light) 0%,
      var(--mahogany-base) 30%,
      var(--mahogany-dark) 100%
    );
  background-color: var(--mahogany-base);
  background-size: 150px 300px, 150px 300px, auto, auto;
}

.login-container {
  width: 100%;
  max-width: 400px;
  padding: 40px;
  background:
    linear-gradient(135deg, rgba(0,0,0,0.1) 0%, transparent 50%),
    var(--leather-base);
  border: 3px solid var(--brass-dark);
  border-radius: 16px;
  box-shadow:
    0 20px 60px rgba(0,0,0,0.6),
    0 8px 20px rgba(0,0,0,0.4),
    inset 0 1px 0 rgba(255,255,255,0.05),
    inset 0 -1px 0 rgba(0,0,0,0.2);
  position: relative;
}

/* Decorative corners */
.login-container::before,
.login-container::after {
  content: '';
  position: absolute;
  width: 30px;
  height: 30px;
  border: 2px solid var(--brass-dark);
  opacity: 0.5;
}

.login-container::before {
  top: 12px;
  left: 12px;
  border-right: none;
  border-bottom: none;
  border-radius: 4px 0 0 0;
}

.login-container::after {
  bottom: 12px;
  right: 12px;
  border-left: none;
  border-top: none;
  border-radius: 0 0 4px 0;
}

.login-header {
  text-align: center;
  margin-bottom: 35px;
}

.login-header h1 {
  font-family: var(--font-display);
  font-size: 2.2rem;
  font-weight: 600;
  color: var(--text-gold);
  letter-spacing: 2px;
  text-shadow: 0 2px 4px rgba(0,0,0,0.4);
  margin-bottom: 8px;
}

.login-header p {
  font-family: var(--font-body);
  font-size: 1rem;
  color: var(--text-muted);
  font-style: italic;
  letter-spacing: 1px;
}

.setup-message {
  text-align: center;
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(212, 168, 75, 0.1);
  border: 1px solid rgba(212, 168, 75, 0.25);
  border-radius: 8px;
}

.setup-message p {
  color: var(--text-light);
  font-size: 0.95rem;
  line-height: 1.5;
}

.login-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.login-field {
  position: relative;
}

.login-input {
  width: 100%;
  padding: 16px 20px;
  border: 2px solid var(--brass-dark);
  border-radius: 8px;
  font-family: var(--font-body);
  font-size: 1.1rem;
  background:
    linear-gradient(180deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.1) 100%),
    var(--mahogany-light);
  color: var(--text-light);
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
  transition: all 0.2s ease;
}

.login-input::placeholder {
  color: var(--text-muted);
  font-style: italic;
}

.login-input:focus {
  outline: none;
  border-color: var(--brass-base);
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.3),
    0 0 0 3px rgba(212, 168, 75, 0.2);
}

.login-input:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.login-error {
  color: #cc6b5a;
  font-size: 0.95rem;
  text-align: center;
  padding: 10px;
  background: rgba(180, 80, 80, 0.1);
  border-radius: 6px;
  border: 1px solid rgba(180, 80, 80, 0.2);
}

.login-button {
  padding: 16px 28px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-family: var(--font-display);
  font-size: 1.1rem;
  font-weight: 500;
  letter-spacing: 1px;
  transition: all 0.3s ease;
  background:
    repeating-linear-gradient(
      90deg,
      transparent 0,
      rgba(255,255,255,0.02) 1px,
      transparent 2px,
      transparent 3px
    ),
    linear-gradient(
      180deg,
      var(--brass-highlight) 0%,
      var(--brass-light) 12%,
      var(--brass-base) 45%,
      var(--brass-dark) 88%,
      var(--brass-shadow) 100%
    );
  color: #1a0f0a;
  text-shadow: 0 1px 0 rgba(255,255,255,0.35);
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.45),
    inset 0 -2px 0 rgba(0,0,0,0.25),
    0 4px 12px rgba(0,0,0,0.35),
    0 0 0 1px var(--brass-dark);
}

.login-button:hover:not(:disabled) {
  background:
    repeating-linear-gradient(
      90deg,
      transparent 0,
      rgba(255,255,255,0.03) 1px,
      transparent 2px,
      transparent 3px
    ),
    linear-gradient(
      180deg,
      var(--brass-highlight) 0%,
      var(--brass-highlight) 15%,
      var(--brass-light) 50%,
      var(--brass-base) 88%,
      var(--brass-dark) 100%
    );
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,0.5),
    inset 0 -2px 0 rgba(0,0,0,0.2),
    0 6px 20px rgba(0,0,0,0.4),
    0 0 20px rgba(212, 168, 75, 0.2),
    0 0 0 1px var(--brass-base);
  transform: translateY(-1px);
}

.login-button:active:not(:disabled) {
  transform: translateY(1px);
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.2),
    0 2px 6px rgba(0,0,0,0.3),
    0 0 0 1px var(--brass-dark);
}

.login-button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none;
}

/* Loading spinner effect */
.app-loading {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--mahogany-dark);
}

.app-loading-spinner {
  width: 50px;
  height: 50px;
  border: 3px solid var(--brass-dark);
  border-top-color: var(--brass-light);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
